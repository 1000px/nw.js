diff --git a/BUILD.gn b/BUILD.gn
index fb2b163422..0c4cf471cb 100755
--- BUILD.gn
+++ BUILD.gn
@@ -394,6 +394,12 @@ if (is_component_ffmpeg) {
     # So we can append below and assume they're defined.
     ldflags = []
 
+    if (is_mac) {
+      ldflags += [
+        "-Wl,-install_name,@loader_path/libffmpeg.dylib"
+      ]
+    }
+
     if (is_posix && !is_mac) {
       # Fixes warnings PIC relocation when building as component.
       ldflags += [
diff --git a/chromium/config/Chromium/linux-noasm/x64/config.h b/chromium/config/Chromium/linux-noasm/x64/config.h
index 1e60a1ead6..0cae0bf863 100644
--- chromium/config/Chromium/linux-noasm/x64/config.h
+++ chromium/config/Chromium/linux-noasm/x64/config.h
@@ -1,7 +1,7 @@
 /* Automatically generated by configure - do not modify! */
 #ifndef FFMPEG_CONFIG_H
 #define FFMPEG_CONFIG_H
-#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac' --extra-cflags=-I/usr/local/google2/chrome-client2/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --disable-asm --disable-inline-asm --enable-pic --enable-lto"
+#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac,mp3' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='mp3,ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac,mp3' --extra-cflags=-I/usr/local/google2/chrome-client2/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --disable-asm --disable-inline-asm --enable-pic --enable-lto"
 #define FFMPEG_LICENSE "LGPL version 2.1 or later"
 #define CONFIG_THIS_YEAR 2017
 #define FFMPEG_DATADIR "/usr/local/share/ffmpeg"
@@ -549,7 +549,7 @@
 #define CONFIG_FFPROBE 0
 #define CONFIG_FFSERVER 0
 #define CONFIG_FFMPEG 0
-#define CONFIG_DCT 0
+#define CONFIG_DCT 1
 #define CONFIG_DWT 0
 #define CONFIG_ERROR_RESILIENCE 0
 #define CONFIG_FAAN 1
@@ -616,8 +616,8 @@
 #define CONFIG_LZF 0
 #define CONFIG_ME_CMP 0
 #define CONFIG_MPEG_ER 0
-#define CONFIG_MPEGAUDIO 0
-#define CONFIG_MPEGAUDIODSP 0
+#define CONFIG_MPEGAUDIO 1
+#define CONFIG_MPEGAUDIODSP 1
 #define CONFIG_MPEGVIDEO 0
 #define CONFIG_MPEGVIDEOENC 0
 #define CONFIG_MSS34DSP 0
@@ -951,7 +951,7 @@
 #define CONFIG_MP1FLOAT_DECODER 0
 #define CONFIG_MP2_DECODER 0
 #define CONFIG_MP2FLOAT_DECODER 0
-#define CONFIG_MP3_DECODER 0
+#define CONFIG_MP3_DECODER 1
 #define CONFIG_MP3FLOAT_DECODER 0
 #define CONFIG_MP3ADU_DECODER 0
 #define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1257,7 +1257,7 @@
 #define CONFIG_MM_DEMUXER 0
 #define CONFIG_MMF_DEMUXER 0
 #define CONFIG_MOV_DEMUXER 0
-#define CONFIG_MP3_DEMUXER 0
+#define CONFIG_MP3_DEMUXER 1
 #define CONFIG_MPC_DEMUXER 0
 #define CONFIG_MPC8_DEMUXER 0
 #define CONFIG_MPEGPS_DEMUXER 0
@@ -2180,7 +2180,7 @@
 #define CONFIG_MJPEG_PARSER 0
 #define CONFIG_MLP_PARSER 0
 #define CONFIG_MPEG4VIDEO_PARSER 0
-#define CONFIG_MPEGAUDIO_PARSER 0
+#define CONFIG_MPEGAUDIO_PARSER 1
 #define CONFIG_MPEGVIDEO_PARSER 0
 #define CONFIG_OPUS_PARSER 1
 #define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/linux/ia32/config.asm b/chromium/config/Chromium/linux/ia32/config.asm
index bab464ea4c..7c23960d2f 100644
--- chromium/config/Chromium/linux/ia32/config.asm
+++ chromium/config/Chromium/linux/ia32/config.asm
@@ -533,7 +533,7 @@
 %define CONFIG_FFPROBE 0
 %define CONFIG_FFSERVER 0
 %define CONFIG_FFMPEG 0
-%define CONFIG_DCT 0
+%define CONFIG_DCT 1
 %define CONFIG_DWT 0
 %define CONFIG_ERROR_RESILIENCE 0
 %define CONFIG_FAAN 1
@@ -600,8 +600,8 @@
 %define CONFIG_LZF 0
 %define CONFIG_ME_CMP 0
 %define CONFIG_MPEG_ER 0
-%define CONFIG_MPEGAUDIO 0
-%define CONFIG_MPEGAUDIODSP 0
+%define CONFIG_MPEGAUDIO 1
+%define CONFIG_MPEGAUDIODSP 1
 %define CONFIG_MPEGVIDEO 0
 %define CONFIG_MPEGVIDEOENC 0
 %define CONFIG_MSS34DSP 0
@@ -935,7 +935,7 @@
 %define CONFIG_MP1FLOAT_DECODER 0
 %define CONFIG_MP2_DECODER 0
 %define CONFIG_MP2FLOAT_DECODER 0
-%define CONFIG_MP3_DECODER 0
+%define CONFIG_MP3_DECODER 1
 %define CONFIG_MP3FLOAT_DECODER 0
 %define CONFIG_MP3ADU_DECODER 0
 %define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1241,7 +1241,7 @@
 %define CONFIG_MM_DEMUXER 0
 %define CONFIG_MMF_DEMUXER 0
 %define CONFIG_MOV_DEMUXER 0
-%define CONFIG_MP3_DEMUXER 0
+%define CONFIG_MP3_DEMUXER 1
 %define CONFIG_MPC_DEMUXER 0
 %define CONFIG_MPC8_DEMUXER 0
 %define CONFIG_MPEGPS_DEMUXER 0
@@ -2164,7 +2164,7 @@
 %define CONFIG_MJPEG_PARSER 0
 %define CONFIG_MLP_PARSER 0
 %define CONFIG_MPEG4VIDEO_PARSER 0
-%define CONFIG_MPEGAUDIO_PARSER 0
+%define CONFIG_MPEGAUDIO_PARSER 1
 %define CONFIG_MPEGVIDEO_PARSER 0
 %define CONFIG_OPUS_PARSER 1
 %define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/linux/ia32/config.h b/chromium/config/Chromium/linux/ia32/config.h
index 2c837fe19a..0c06880491 100644
--- chromium/config/Chromium/linux/ia32/config.h
+++ chromium/config/Chromium/linux/ia32/config.h
@@ -1,7 +1,7 @@
 /* Automatically generated by configure - do not modify! */
 #ifndef FFMPEG_CONFIG_H
 #define FFMPEG_CONFIG_H
-#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac' --extra-cflags=-I/usr/local/google2/chrome-client2/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --arch=i686 --extra-cflags='\"-m32\"' --extra-ldflags='\"-m32\"' --enable-yasm --enable-pic"
+#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac,mp3' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='mp3,ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac,mp3' --extra-cflags=-I/usr/local/google2/chrome-client2/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --arch=i686 --extra-cflags='\"-m32\"' --extra-ldflags='\"-m32\"' --enable-yasm --enable-pic"
 #define FFMPEG_LICENSE "LGPL version 2.1 or later"
 #define CONFIG_THIS_YEAR 2017
 #define FFMPEG_DATADIR "/usr/local/share/ffmpeg"
@@ -549,7 +549,7 @@
 #define CONFIG_FFPROBE 0
 #define CONFIG_FFSERVER 0
 #define CONFIG_FFMPEG 0
-#define CONFIG_DCT 0
+#define CONFIG_DCT 1
 #define CONFIG_DWT 0
 #define CONFIG_ERROR_RESILIENCE 0
 #define CONFIG_FAAN 1
@@ -616,8 +616,8 @@
 #define CONFIG_LZF 0
 #define CONFIG_ME_CMP 0
 #define CONFIG_MPEG_ER 0
-#define CONFIG_MPEGAUDIO 0
-#define CONFIG_MPEGAUDIODSP 0
+#define CONFIG_MPEGAUDIO 1
+#define CONFIG_MPEGAUDIODSP 1
 #define CONFIG_MPEGVIDEO 0
 #define CONFIG_MPEGVIDEOENC 0
 #define CONFIG_MSS34DSP 0
@@ -951,7 +951,7 @@
 #define CONFIG_MP1FLOAT_DECODER 0
 #define CONFIG_MP2_DECODER 0
 #define CONFIG_MP2FLOAT_DECODER 0
-#define CONFIG_MP3_DECODER 0
+#define CONFIG_MP3_DECODER 1
 #define CONFIG_MP3FLOAT_DECODER 0
 #define CONFIG_MP3ADU_DECODER 0
 #define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1257,7 +1257,7 @@
 #define CONFIG_MM_DEMUXER 0
 #define CONFIG_MMF_DEMUXER 0
 #define CONFIG_MOV_DEMUXER 0
-#define CONFIG_MP3_DEMUXER 0
+#define CONFIG_MP3_DEMUXER 1
 #define CONFIG_MPC_DEMUXER 0
 #define CONFIG_MPC8_DEMUXER 0
 #define CONFIG_MPEGPS_DEMUXER 0
@@ -2180,7 +2180,7 @@
 #define CONFIG_MJPEG_PARSER 0
 #define CONFIG_MLP_PARSER 0
 #define CONFIG_MPEG4VIDEO_PARSER 0
-#define CONFIG_MPEGAUDIO_PARSER 0
+#define CONFIG_MPEGAUDIO_PARSER 1
 #define CONFIG_MPEGVIDEO_PARSER 0
 #define CONFIG_OPUS_PARSER 1
 #define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/linux/x64/config.asm b/chromium/config/Chromium/linux/x64/config.asm
index efe488ba01..2ace23b873 100644
--- chromium/config/Chromium/linux/x64/config.asm
+++ chromium/config/Chromium/linux/x64/config.asm
@@ -533,7 +533,7 @@
 %define CONFIG_FFPROBE 0
 %define CONFIG_FFSERVER 0
 %define CONFIG_FFMPEG 0
-%define CONFIG_DCT 0
+%define CONFIG_DCT 1
 %define CONFIG_DWT 0
 %define CONFIG_ERROR_RESILIENCE 0
 %define CONFIG_FAAN 1
@@ -600,8 +600,8 @@
 %define CONFIG_LZF 0
 %define CONFIG_ME_CMP 0
 %define CONFIG_MPEG_ER 0
-%define CONFIG_MPEGAUDIO 0
-%define CONFIG_MPEGAUDIODSP 0
+%define CONFIG_MPEGAUDIO 1
+%define CONFIG_MPEGAUDIODSP 1
 %define CONFIG_MPEGVIDEO 0
 %define CONFIG_MPEGVIDEOENC 0
 %define CONFIG_MSS34DSP 0
@@ -935,7 +935,7 @@
 %define CONFIG_MP1FLOAT_DECODER 0
 %define CONFIG_MP2_DECODER 0
 %define CONFIG_MP2FLOAT_DECODER 0
-%define CONFIG_MP3_DECODER 0
+%define CONFIG_MP3_DECODER 1
 %define CONFIG_MP3FLOAT_DECODER 0
 %define CONFIG_MP3ADU_DECODER 0
 %define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1241,7 +1241,7 @@
 %define CONFIG_MM_DEMUXER 0
 %define CONFIG_MMF_DEMUXER 0
 %define CONFIG_MOV_DEMUXER 0
-%define CONFIG_MP3_DEMUXER 0
+%define CONFIG_MP3_DEMUXER 1
 %define CONFIG_MPC_DEMUXER 0
 %define CONFIG_MPC8_DEMUXER 0
 %define CONFIG_MPEGPS_DEMUXER 0
@@ -2164,7 +2164,7 @@
 %define CONFIG_MJPEG_PARSER 0
 %define CONFIG_MLP_PARSER 0
 %define CONFIG_MPEG4VIDEO_PARSER 0
-%define CONFIG_MPEGAUDIO_PARSER 0
+%define CONFIG_MPEGAUDIO_PARSER 1
 %define CONFIG_MPEGVIDEO_PARSER 0
 %define CONFIG_OPUS_PARSER 1
 %define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/linux/x64/config.h b/chromium/config/Chromium/linux/x64/config.h
index b5d97958cc..83c6835123 100644
--- chromium/config/Chromium/linux/x64/config.h
+++ chromium/config/Chromium/linux/x64/config.h
@@ -1,7 +1,7 @@
 /* Automatically generated by configure - do not modify! */
 #ifndef FFMPEG_CONFIG_H
 #define FFMPEG_CONFIG_H
-#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac' --extra-cflags=-I/usr/local/google2/chrome-client2/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --enable-pic --enable-lto"
+#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac,mp3' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='mp3,ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac,mp3' --extra-cflags=-I/usr/local/google2/chrome-client2/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --enable-pic --enable-lto"
 #define FFMPEG_LICENSE "LGPL version 2.1 or later"
 #define CONFIG_THIS_YEAR 2017
 #define FFMPEG_DATADIR "/usr/local/share/ffmpeg"
@@ -549,7 +549,7 @@
 #define CONFIG_FFPROBE 0
 #define CONFIG_FFSERVER 0
 #define CONFIG_FFMPEG 0
-#define CONFIG_DCT 0
+#define CONFIG_DCT 1
 #define CONFIG_DWT 0
 #define CONFIG_ERROR_RESILIENCE 0
 #define CONFIG_FAAN 1
@@ -616,8 +616,8 @@
 #define CONFIG_LZF 0
 #define CONFIG_ME_CMP 0
 #define CONFIG_MPEG_ER 0
-#define CONFIG_MPEGAUDIO 0
-#define CONFIG_MPEGAUDIODSP 0
+#define CONFIG_MPEGAUDIO 1
+#define CONFIG_MPEGAUDIODSP 1
 #define CONFIG_MPEGVIDEO 0
 #define CONFIG_MPEGVIDEOENC 0
 #define CONFIG_MSS34DSP 0
@@ -951,7 +951,7 @@
 #define CONFIG_MP1FLOAT_DECODER 0
 #define CONFIG_MP2_DECODER 0
 #define CONFIG_MP2FLOAT_DECODER 0
-#define CONFIG_MP3_DECODER 0
+#define CONFIG_MP3_DECODER 1
 #define CONFIG_MP3FLOAT_DECODER 0
 #define CONFIG_MP3ADU_DECODER 0
 #define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1257,7 +1257,7 @@
 #define CONFIG_MM_DEMUXER 0
 #define CONFIG_MMF_DEMUXER 0
 #define CONFIG_MOV_DEMUXER 0
-#define CONFIG_MP3_DEMUXER 0
+#define CONFIG_MP3_DEMUXER 1
 #define CONFIG_MPC_DEMUXER 0
 #define CONFIG_MPC8_DEMUXER 0
 #define CONFIG_MPEGPS_DEMUXER 0
@@ -2180,7 +2180,7 @@
 #define CONFIG_MJPEG_PARSER 0
 #define CONFIG_MLP_PARSER 0
 #define CONFIG_MPEG4VIDEO_PARSER 0
-#define CONFIG_MPEGAUDIO_PARSER 0
+#define CONFIG_MPEGAUDIO_PARSER 1
 #define CONFIG_MPEGVIDEO_PARSER 0
 #define CONFIG_OPUS_PARSER 1
 #define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/mac/x64/config.asm b/chromium/config/Chromium/mac/x64/config.asm
index 8e9f7aac29..0ab972dbf6 100644
--- chromium/config/Chromium/mac/x64/config.asm
+++ chromium/config/Chromium/mac/x64/config.asm
@@ -533,7 +533,7 @@
 %define CONFIG_FFPROBE 0
 %define CONFIG_FFSERVER 0
 %define CONFIG_FFMPEG 0
-%define CONFIG_DCT 0
+%define CONFIG_DCT 1
 %define CONFIG_DWT 0
 %define CONFIG_ERROR_RESILIENCE 0
 %define CONFIG_FAAN 1
@@ -600,8 +600,8 @@
 %define CONFIG_LZF 0
 %define CONFIG_ME_CMP 0
 %define CONFIG_MPEG_ER 0
-%define CONFIG_MPEGAUDIO 0
-%define CONFIG_MPEGAUDIODSP 0
+%define CONFIG_MPEGAUDIO 1
+%define CONFIG_MPEGAUDIODSP 1
 %define CONFIG_MPEGVIDEO 0
 %define CONFIG_MPEGVIDEOENC 0
 %define CONFIG_MSS34DSP 0
@@ -935,7 +935,7 @@
 %define CONFIG_MP1FLOAT_DECODER 0
 %define CONFIG_MP2_DECODER 0
 %define CONFIG_MP2FLOAT_DECODER 0
-%define CONFIG_MP3_DECODER 0
+%define CONFIG_MP3_DECODER 1
 %define CONFIG_MP3FLOAT_DECODER 0
 %define CONFIG_MP3ADU_DECODER 0
 %define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1241,7 +1241,7 @@
 %define CONFIG_MM_DEMUXER 0
 %define CONFIG_MMF_DEMUXER 0
 %define CONFIG_MOV_DEMUXER 0
-%define CONFIG_MP3_DEMUXER 0
+%define CONFIG_MP3_DEMUXER 1
 %define CONFIG_MPC_DEMUXER 0
 %define CONFIG_MPC8_DEMUXER 0
 %define CONFIG_MPEGPS_DEMUXER 0
@@ -2164,7 +2164,7 @@
 %define CONFIG_MJPEG_PARSER 0
 %define CONFIG_MLP_PARSER 0
 %define CONFIG_MPEG4VIDEO_PARSER 0
-%define CONFIG_MPEGAUDIO_PARSER 0
+%define CONFIG_MPEGAUDIO_PARSER 1
 %define CONFIG_MPEGVIDEO_PARSER 0
 %define CONFIG_OPUS_PARSER 1
 %define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/mac/x64/config.h b/chromium/config/Chromium/mac/x64/config.h
index 35be6cfb23..93a5caaace 100644
--- chromium/config/Chromium/mac/x64/config.h
+++ chromium/config/Chromium/mac/x64/config.h
@@ -1,7 +1,7 @@
 /* Automatically generated by configure - do not modify! */
 #ifndef FFMPEG_CONFIG_H
 #define FFMPEG_CONFIG_H
-#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac' --extra-cflags=-I/Users/hubbe/chrome/src/third_party/opus/src/include --optflags='\0-O2\0' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --enable-pic --enable-yasm --cc=clang --cxx=clang++ --extra-libs=-lopus --arch=x86_64 --extra-cflags=-m64 --extra-ldflags=-m64"
+#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac,mp3' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='mp3,ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac,mp3' --extra-cflags=-I/Users/hubbe/chrome/src/third_party/opus/src/include --optflags='\0-O2\0' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --enable-pic --enable-yasm --cc=clang --cxx=clang++ --extra-libs=-lopus --arch=x86_64 --extra-cflags=-m64 --extra-ldflags=-m64"
 #define FFMPEG_LICENSE "LGPL version 2.1 or later"
 #define CONFIG_THIS_YEAR 2017
 #define FFMPEG_DATADIR "/usr/local/share/ffmpeg"
@@ -549,7 +549,7 @@
 #define CONFIG_FFPROBE 0
 #define CONFIG_FFSERVER 0
 #define CONFIG_FFMPEG 0
-#define CONFIG_DCT 0
+#define CONFIG_DCT 1
 #define CONFIG_DWT 0
 #define CONFIG_ERROR_RESILIENCE 0
 #define CONFIG_FAAN 1
@@ -616,8 +616,8 @@
 #define CONFIG_LZF 0
 #define CONFIG_ME_CMP 0
 #define CONFIG_MPEG_ER 0
-#define CONFIG_MPEGAUDIO 0
-#define CONFIG_MPEGAUDIODSP 0
+#define CONFIG_MPEGAUDIO 1
+#define CONFIG_MPEGAUDIODSP 1
 #define CONFIG_MPEGVIDEO 0
 #define CONFIG_MPEGVIDEOENC 0
 #define CONFIG_MSS34DSP 0
@@ -951,7 +951,7 @@
 #define CONFIG_MP1FLOAT_DECODER 0
 #define CONFIG_MP2_DECODER 0
 #define CONFIG_MP2FLOAT_DECODER 0
-#define CONFIG_MP3_DECODER 0
+#define CONFIG_MP3_DECODER 1
 #define CONFIG_MP3FLOAT_DECODER 0
 #define CONFIG_MP3ADU_DECODER 0
 #define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1257,7 +1257,7 @@
 #define CONFIG_MM_DEMUXER 0
 #define CONFIG_MMF_DEMUXER 0
 #define CONFIG_MOV_DEMUXER 0
-#define CONFIG_MP3_DEMUXER 0
+#define CONFIG_MP3_DEMUXER 1
 #define CONFIG_MPC_DEMUXER 0
 #define CONFIG_MPC8_DEMUXER 0
 #define CONFIG_MPEGPS_DEMUXER 0
@@ -2180,7 +2180,7 @@
 #define CONFIG_MJPEG_PARSER 0
 #define CONFIG_MLP_PARSER 0
 #define CONFIG_MPEG4VIDEO_PARSER 0
-#define CONFIG_MPEGAUDIO_PARSER 0
+#define CONFIG_MPEGAUDIO_PARSER 1
 #define CONFIG_MPEGVIDEO_PARSER 0
 #define CONFIG_OPUS_PARSER 1
 #define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/win/ia32/config.asm b/chromium/config/Chromium/win/ia32/config.asm
index 00671db719..18f4a458ab 100644
--- chromium/config/Chromium/win/ia32/config.asm
+++ chromium/config/Chromium/win/ia32/config.asm
@@ -533,7 +533,7 @@
 %define CONFIG_FFPROBE 0
 %define CONFIG_FFSERVER 0
 %define CONFIG_FFMPEG 0
-%define CONFIG_DCT 0
+%define CONFIG_DCT 1
 %define CONFIG_DWT 0
 %define CONFIG_ERROR_RESILIENCE 0
 %define CONFIG_FAAN 1
@@ -600,8 +600,8 @@
 %define CONFIG_LZF 0
 %define CONFIG_ME_CMP 0
 %define CONFIG_MPEG_ER 0
-%define CONFIG_MPEGAUDIO 0
-%define CONFIG_MPEGAUDIODSP 0
+%define CONFIG_MPEGAUDIO 1
+%define CONFIG_MPEGAUDIODSP 1
 %define CONFIG_MPEGVIDEO 0
 %define CONFIG_MPEGVIDEOENC 0
 %define CONFIG_MSS34DSP 0
@@ -935,7 +935,7 @@
 %define CONFIG_MP1FLOAT_DECODER 0
 %define CONFIG_MP2_DECODER 0
 %define CONFIG_MP2FLOAT_DECODER 0
-%define CONFIG_MP3_DECODER 0
+%define CONFIG_MP3_DECODER 1
 %define CONFIG_MP3FLOAT_DECODER 0
 %define CONFIG_MP3ADU_DECODER 0
 %define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1241,7 +1241,7 @@
 %define CONFIG_MM_DEMUXER 0
 %define CONFIG_MMF_DEMUXER 0
 %define CONFIG_MOV_DEMUXER 0
-%define CONFIG_MP3_DEMUXER 0
+%define CONFIG_MP3_DEMUXER 1
 %define CONFIG_MPC_DEMUXER 0
 %define CONFIG_MPC8_DEMUXER 0
 %define CONFIG_MPEGPS_DEMUXER 0
@@ -2164,7 +2164,7 @@
 %define CONFIG_MJPEG_PARSER 0
 %define CONFIG_MLP_PARSER 0
 %define CONFIG_MPEG4VIDEO_PARSER 0
-%define CONFIG_MPEGAUDIO_PARSER 0
+%define CONFIG_MPEGAUDIO_PARSER 1
 %define CONFIG_MPEGVIDEO_PARSER 0
 %define CONFIG_OPUS_PARSER 1
 %define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/win/ia32/config.h b/chromium/config/Chromium/win/ia32/config.h
index 43015b9b14..25898c6314 100644
--- chromium/config/Chromium/win/ia32/config.h
+++ chromium/config/Chromium/win/ia32/config.h
@@ -1,7 +1,7 @@
 /* Automatically generated by configure - do not modify! */
 #ifndef FFMPEG_CONFIG_H
 #define FFMPEG_CONFIG_H
-#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac' --extra-cflags=-I/cygdrive/d/src/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --toolchain=msvc --cpu=opteron --enable-yasm --extra-cflags=-I/cygdrive/d/src/src/third_party/ffmpeg/chromium/include/win --cc='cygwin-wrapper cl' --ld='cygwin-wrapper link' --nm='cygwin-wrapper dumpbin -symbols' --ar='cygwin-wrapper lib'"
+#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac,mp3' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='mp3,ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac,mp3' --extra-cflags=-I/cygdrive/d/src/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --toolchain=msvc --cpu=opteron --enable-yasm --extra-cflags=-I/cygdrive/d/src/src/third_party/ffmpeg/chromium/include/win --cc='cygwin-wrapper cl' --ld='cygwin-wrapper link' --nm='cygwin-wrapper dumpbin -symbols' --ar='cygwin-wrapper lib'"
 #define FFMPEG_LICENSE "LGPL version 2.1 or later"
 #define CONFIG_THIS_YEAR 2017
 #define FFMPEG_DATADIR "/usr/local/share/ffmpeg"
@@ -549,7 +549,7 @@
 #define CONFIG_FFPROBE 0
 #define CONFIG_FFSERVER 0
 #define CONFIG_FFMPEG 0
-#define CONFIG_DCT 0
+#define CONFIG_DCT 1
 #define CONFIG_DWT 0
 #define CONFIG_ERROR_RESILIENCE 0
 #define CONFIG_FAAN 1
@@ -616,8 +616,8 @@
 #define CONFIG_LZF 0
 #define CONFIG_ME_CMP 0
 #define CONFIG_MPEG_ER 0
-#define CONFIG_MPEGAUDIO 0
-#define CONFIG_MPEGAUDIODSP 0
+#define CONFIG_MPEGAUDIO 1
+#define CONFIG_MPEGAUDIODSP 1
 #define CONFIG_MPEGVIDEO 0
 #define CONFIG_MPEGVIDEOENC 0
 #define CONFIG_MSS34DSP 0
@@ -951,7 +951,7 @@
 #define CONFIG_MP1FLOAT_DECODER 0
 #define CONFIG_MP2_DECODER 0
 #define CONFIG_MP2FLOAT_DECODER 0
-#define CONFIG_MP3_DECODER 0
+#define CONFIG_MP3_DECODER 1
 #define CONFIG_MP3FLOAT_DECODER 0
 #define CONFIG_MP3ADU_DECODER 0
 #define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1257,7 +1257,7 @@
 #define CONFIG_MM_DEMUXER 0
 #define CONFIG_MMF_DEMUXER 0
 #define CONFIG_MOV_DEMUXER 0
-#define CONFIG_MP3_DEMUXER 0
+#define CONFIG_MP3_DEMUXER 1
 #define CONFIG_MPC_DEMUXER 0
 #define CONFIG_MPC8_DEMUXER 0
 #define CONFIG_MPEGPS_DEMUXER 0
@@ -2180,7 +2180,7 @@
 #define CONFIG_MJPEG_PARSER 0
 #define CONFIG_MLP_PARSER 0
 #define CONFIG_MPEG4VIDEO_PARSER 0
-#define CONFIG_MPEGAUDIO_PARSER 0
+#define CONFIG_MPEGAUDIO_PARSER 1
 #define CONFIG_MPEGVIDEO_PARSER 0
 #define CONFIG_OPUS_PARSER 1
 #define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/win/x64/config.asm b/chromium/config/Chromium/win/x64/config.asm
index 5b30a5741a..3bc7fb8d92 100644
--- chromium/config/Chromium/win/x64/config.asm
+++ chromium/config/Chromium/win/x64/config.asm
@@ -533,7 +533,7 @@
 %define CONFIG_FFPROBE 0
 %define CONFIG_FFSERVER 0
 %define CONFIG_FFMPEG 0
-%define CONFIG_DCT 0
+%define CONFIG_DCT 1
 %define CONFIG_DWT 0
 %define CONFIG_ERROR_RESILIENCE 0
 %define CONFIG_FAAN 1
@@ -600,8 +600,8 @@
 %define CONFIG_LZF 0
 %define CONFIG_ME_CMP 0
 %define CONFIG_MPEG_ER 0
-%define CONFIG_MPEGAUDIO 0
-%define CONFIG_MPEGAUDIODSP 0
+%define CONFIG_MPEGAUDIO 1
+%define CONFIG_MPEGAUDIODSP 1
 %define CONFIG_MPEGVIDEO 0
 %define CONFIG_MPEGVIDEOENC 0
 %define CONFIG_MSS34DSP 0
@@ -935,7 +935,7 @@
 %define CONFIG_MP1FLOAT_DECODER 0
 %define CONFIG_MP2_DECODER 0
 %define CONFIG_MP2FLOAT_DECODER 0
-%define CONFIG_MP3_DECODER 0
+%define CONFIG_MP3_DECODER 1
 %define CONFIG_MP3FLOAT_DECODER 0
 %define CONFIG_MP3ADU_DECODER 0
 %define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1241,7 +1241,7 @@
 %define CONFIG_MM_DEMUXER 0
 %define CONFIG_MMF_DEMUXER 0
 %define CONFIG_MOV_DEMUXER 0
-%define CONFIG_MP3_DEMUXER 0
+%define CONFIG_MP3_DEMUXER 1
 %define CONFIG_MPC_DEMUXER 0
 %define CONFIG_MPC8_DEMUXER 0
 %define CONFIG_MPEGPS_DEMUXER 0
@@ -2164,7 +2164,7 @@
 %define CONFIG_MJPEG_PARSER 0
 %define CONFIG_MLP_PARSER 0
 %define CONFIG_MPEG4VIDEO_PARSER 0
-%define CONFIG_MPEGAUDIO_PARSER 0
+%define CONFIG_MPEGAUDIO_PARSER 1
 %define CONFIG_MPEGVIDEO_PARSER 0
 %define CONFIG_OPUS_PARSER 1
 %define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/win/x64/config.h b/chromium/config/Chromium/win/x64/config.h
index f3ff9f12a3..964b00e16c 100644
--- chromium/config/Chromium/win/x64/config.h
+++ chromium/config/Chromium/win/x64/config.h
@@ -1,7 +1,7 @@
 /* Automatically generated by configure - do not modify! */
 #ifndef FFMPEG_CONFIG_H
 #define FFMPEG_CONFIG_H
-#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac' --extra-cflags=-I/cygdrive/d/src/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --toolchain=msvc --cpu=opteron --enable-yasm --extra-cflags=-I/cygdrive/d/src/src/third_party/ffmpeg/chromium/include/win --cc='cygwin-wrapper cl' --ld='cygwin-wrapper link' --nm='cygwin-wrapper dumpbin -symbols' --ar='cygwin-wrapper lib'"
+#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac,mp3' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='mp3,ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac,mp3' --extra-cflags=-I/cygdrive/d/src/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --toolchain=msvc --cpu=opteron --enable-yasm --extra-cflags=-I/cygdrive/d/src/src/third_party/ffmpeg/chromium/include/win --cc='cygwin-wrapper cl' --ld='cygwin-wrapper link' --nm='cygwin-wrapper dumpbin -symbols' --ar='cygwin-wrapper lib'"
 #define FFMPEG_LICENSE "LGPL version 2.1 or later"
 #define CONFIG_THIS_YEAR 2017
 #define FFMPEG_DATADIR "/usr/local/share/ffmpeg"
@@ -549,7 +549,7 @@
 #define CONFIG_FFPROBE 0
 #define CONFIG_FFSERVER 0
 #define CONFIG_FFMPEG 0
-#define CONFIG_DCT 0
+#define CONFIG_DCT 1
 #define CONFIG_DWT 0
 #define CONFIG_ERROR_RESILIENCE 0
 #define CONFIG_FAAN 1
@@ -616,8 +616,8 @@
 #define CONFIG_LZF 0
 #define CONFIG_ME_CMP 0
 #define CONFIG_MPEG_ER 0
-#define CONFIG_MPEGAUDIO 0
-#define CONFIG_MPEGAUDIODSP 0
+#define CONFIG_MPEGAUDIO 1
+#define CONFIG_MPEGAUDIODSP 1
 #define CONFIG_MPEGVIDEO 0
 #define CONFIG_MPEGVIDEOENC 0
 #define CONFIG_MSS34DSP 0
@@ -951,7 +951,7 @@
 #define CONFIG_MP1FLOAT_DECODER 0
 #define CONFIG_MP2_DECODER 0
 #define CONFIG_MP2FLOAT_DECODER 0
-#define CONFIG_MP3_DECODER 0
+#define CONFIG_MP3_DECODER 1
 #define CONFIG_MP3FLOAT_DECODER 0
 #define CONFIG_MP3ADU_DECODER 0
 #define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1257,7 +1257,7 @@
 #define CONFIG_MM_DEMUXER 0
 #define CONFIG_MMF_DEMUXER 0
 #define CONFIG_MOV_DEMUXER 0
-#define CONFIG_MP3_DEMUXER 0
+#define CONFIG_MP3_DEMUXER 1
 #define CONFIG_MPC_DEMUXER 0
 #define CONFIG_MPC8_DEMUXER 0
 #define CONFIG_MPEGPS_DEMUXER 0
@@ -2180,7 +2180,7 @@
 #define CONFIG_MJPEG_PARSER 0
 #define CONFIG_MLP_PARSER 0
 #define CONFIG_MPEG4VIDEO_PARSER 0
-#define CONFIG_MPEGAUDIO_PARSER 0
+#define CONFIG_MPEGAUDIO_PARSER 1
 #define CONFIG_MPEGVIDEO_PARSER 0
 #define CONFIG_OPUS_PARSER 1
 #define CONFIG_PNG_PARSER 0
diff --git a/ffmpeg_generated.gni b/ffmpeg_generated.gni
index 8a7dc89891..f88cb073eb 100644
--- ffmpeg_generated.gni
+++ ffmpeg_generated.gni
@@ -17,6 +17,7 @@ if ((is_android && current_cpu == "arm" && arm_use_neon) || (is_android && curre
     "libavcodec/allcodecs.c",
     "libavcodec/autorename_libavcodec_flacdec.c",
     "libavcodec/autorename_libavcodec_flacdsp.c",
+    "libavcodec/autorename_libavcodec_mpegaudiodsp.c",
     "libavcodec/autorename_libavcodec_utils.c",
     "libavcodec/autorename_libavcodec_vorbisdsp.c",
     "libavcodec/avdct.c",
@@ -29,6 +30,9 @@ if ((is_android && current_cpu == "arm" && arm_use_neon) || (is_android && curre
     "libavcodec/bsf.c",
     "libavcodec/codec_desc.c",
     "libavcodec/d3d11va.c",
+    "libavcodec/dct.c",
+    "libavcodec/dct32_fixed.c",
+    "libavcodec/dct32_float.c",
     "libavcodec/dirac.c",
     "libavcodec/dv_profile.c",
     "libavcodec/fft_fixed.c",
@@ -50,7 +54,14 @@ if ((is_android && current_cpu == "arm" && arm_use_neon) || (is_android && curre
     "libavcodec/mediacodec.c",
     "libavcodec/mpeg12framerate.c",
     "libavcodec/mpeg4audio.c",
+    "libavcodec/mpegaudio.c",
+    "libavcodec/mpegaudio_parser.c",
     "libavcodec/mpegaudiodata.c",
+    "libavcodec/mpegaudiodec_fixed.c",
+    "libavcodec/mpegaudiodecheader.c",
+    "libavcodec/mpegaudiodsp_data.c",
+    "libavcodec/mpegaudiodsp_fixed.c",
+    "libavcodec/mpegaudiodsp_float.c",
     "libavcodec/options.c",
     "libavcodec/opus.c",
     "libavcodec/opus_parser.c",
@@ -85,6 +96,7 @@ if ((is_android && current_cpu == "arm" && arm_use_neon) || (is_android && curre
     "libavformat/matroska.c",
     "libavformat/matroskadec.c",
     "libavformat/metadata.c",
+    "libavformat/mp3dec.c",
     "libavformat/mux.c",
     "libavformat/oggdec.c",
     "libavformat/oggparsecelt.c",
@@ -187,21 +199,10 @@ if ((current_cpu == "x64" && ffmpeg_branding == "Chrome") || (is_android && curr
     "libavcodec/aactab.c",
     "libavcodec/ac3tab.c",
     "libavcodec/autorename_libavcodec_aacdec.c",
-    "libavcodec/autorename_libavcodec_mpegaudiodsp.c",
     "libavcodec/autorename_libavcodec_sbrdsp.c",
     "libavcodec/cbrt_data.c",
-    "libavcodec/dct.c",
-    "libavcodec/dct32_fixed.c",
-    "libavcodec/dct32_float.c",
     "libavcodec/imdct15.c",
     "libavcodec/kbdwin.c",
-    "libavcodec/mpegaudio.c",
-    "libavcodec/mpegaudio_parser.c",
-    "libavcodec/mpegaudiodec_fixed.c",
-    "libavcodec/mpegaudiodecheader.c",
-    "libavcodec/mpegaudiodsp_data.c",
-    "libavcodec/mpegaudiodsp_fixed.c",
-    "libavcodec/mpegaudiodsp_float.c",
     "libavcodec/sinewin.c",
     "libavcodec/sinewin_fixed.c",
     "libavformat/aacdec.c",
@@ -209,7 +210,6 @@ if ((current_cpu == "x64" && ffmpeg_branding == "Chrome") || (is_android && curr
     "libavformat/img2.c",
     "libavformat/mov.c",
     "libavformat/mov_chan.c",
-    "libavformat/mp3dec.c",
   ]
 }
 
@@ -217,6 +217,8 @@ if ((is_android && current_cpu == "x64") || (is_android && current_cpu == "x86")
   ffmpeg_c_sources += [
     "libavcodec/x86/autorename_libavcodec_x86_vorbisdsp_init.c",
     "libavcodec/x86/constants.c",
+    "libavcodec/x86/dct_init.c",
+    "libavcodec/x86/mpegaudiodsp.c",
     "libavcodec/x86/fft_init.c",
     "libavcodec/x86/flacdsp_init.c",
     "libavutil/x86/autorename_libavutil_x86_cpu.c",
@@ -279,6 +281,8 @@ if ((is_android && current_cpu == "arm" && arm_use_neon) || (is_linux && current
 
 if ((is_android && current_cpu == "x64") || (is_linux && current_cpu == "x64") || (is_linux && current_cpu == "x86") || (is_mac) || (is_win)) {
   ffmpeg_yasm_sources += [
+    "libavcodec/x86/dct32.asm",
+    "libavcodec/x86/imdct36.asm",
     "libavcodec/x86/fft.asm",
     "libavcodec/x86/flacdsp.asm",
     "libavcodec/x86/vorbisdsp.asm",
@@ -312,8 +316,6 @@ if ((is_linux && current_cpu == "x64") || (is_linux && current_cpu == "x86") ||
 if ((current_cpu == "x64" && ffmpeg_branding == "Chrome") || (is_android && current_cpu == "x86" && ffmpeg_branding == "Chrome") || (is_linux && current_cpu == "x64" && ffmpeg_branding == "ChromeOS") || (is_linux && current_cpu == "x86" && ffmpeg_branding == "Chrome") || (is_linux && current_cpu == "x86" && ffmpeg_branding == "ChromeOS") || (is_win && ffmpeg_branding == "Chrome")) {
   ffmpeg_c_sources += [
     "libavcodec/x86/aacpsdsp_init.c",
-    "libavcodec/x86/dct_init.c",
-    "libavcodec/x86/mpegaudiodsp.c",
     "libavcodec/x86/sbrdsp_init.c",
   ]
 }
@@ -321,8 +323,6 @@ if ((current_cpu == "x64" && ffmpeg_branding == "Chrome") || (is_android && curr
 if ((current_cpu == "x64" && ffmpeg_branding == "Chrome") || (is_linux && current_cpu == "x64" && ffmpeg_branding == "ChromeOS") || (is_linux && current_cpu == "x86" && ffmpeg_branding == "Chrome") || (is_linux && current_cpu == "x86" && ffmpeg_branding == "ChromeOS") || (is_win && ffmpeg_branding == "Chrome")) {
   ffmpeg_yasm_sources += [
     "libavcodec/x86/aacpsdsp.asm",
-    "libavcodec/x86/dct32.asm",
-    "libavcodec/x86/imdct36.asm",
     "libavcodec/x86/sbrdsp.asm",
   ]
 }
